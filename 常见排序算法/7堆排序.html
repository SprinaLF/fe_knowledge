<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    function heapSort(ary) {
        // 实现最大堆
        // start: 父节点, end: 循环深度
        function maxHeap(ary, start, end) {
            let parent = start, // 父节点
                son = parent*2 + 1, // 左子节点
                temp = null;
            // 规定循序最大深度
            while(son<=end) {
                // 如果存在右子节点, 并且判断右节点是否大于左节点
                if(son+1<=end && ary[son] < ary[son+1]) son++;
                if(ary[son] > ary[parent]) {
                    temp = ary[son];
                    ary[son] = ary[parent];
                    ary[parent] = temp;
                    parent = son;
                    son = parent*2 +1;
                }else {
                    return;
                }
            }
        }
        // 构建最大堆  ary.length/2-1: 表示最后一个父节点
        for(let i = ary.length/2-1; i>=0; i--) {
            maxHeap(ary, i, ary.length-1);
        }
        // 排序
        for(let i = ary.length-1; i>0; i--) {
            let temp = ary[0];
            ary[0] = ary[i];
            ary[i]= temp;
            // 剔除最后一个元素,并复原最大堆
            maxHeap(ary, 0, i-1);
        }
        return ary;
    }
</script>

</body>
</html>